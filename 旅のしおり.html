<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èŒã€…å­ã®èª•ç”Ÿæ—¥ â€” æ—…ã®ã—ãŠã‚Š</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ===== Variables ===== */
    :root {
      --ink: #1a1612;
      --paper: #faf8f5;
      --gold: #a67c52;
      --gold-light: #c9a86c;
      --gold-bg: rgba(166, 124, 82, 0.08);
      --border: #e5ddd0;
      --white: #fff;
      --shadow: 0 8px 32px rgba(26, 22, 18, 0.08);
      --shadow-strong: 0 16px 48px rgba(26, 22, 18, 0.16);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: var(--paper);
      color: var(--ink);
      line-height: 1.75;
      overflow-x: hidden;
    }

    /* ===== Hero ===== */
    .hero {
      min-height: 100vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
    }
    .hero-bg {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(180deg, rgba(8,5,3,0.52) 0%, rgba(8,5,3,0.72) 100%),
        url('ãƒ­ã‚¤ãã¬/IMG_4236.jpg') center/cover no-repeat;
      animation: heroZoom 22s ease-in-out infinite alternate;
      transform-origin: center;
    }
    @keyframes heroZoom {
      from { transform: scale(1.04); }
      to   { transform: scale(1.12); }
    }
    .hero-inner {
      position: relative;
      z-index: 2;
      padding: 2rem;
      max-width: 560px;
      animation: heroFadeIn 1.4s cubic-bezier(0.22, 1, 0.36, 1) both;
    }
    @keyframes heroFadeIn {
      from { opacity: 0; transform: translateY(28px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .hero h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(2.4rem, 7vw, 3.8rem);
      font-weight: 600;
      color: var(--white);
      text-shadow: 0 2px 28px rgba(0,0,0,0.5);
      letter-spacing: 0.08em;
      margin-bottom: 0.5rem;
    }
    .hero .sub {
      color: rgba(255,255,255,0.95);
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      font-weight: 300;
      letter-spacing: 0.22em;
    }
    .hero .date {
      margin-top: 1.75rem;
      color: var(--gold-light);
      font-size: clamp(0.85rem, 2vw, 1rem);
      letter-spacing: 0.25em;
    }
    .hero-family {
      margin-top: 2.5rem;
      display: flex;
      justify-content: center;
      gap: 0.6rem;
      flex-wrap: wrap;
    }
    .hero-family span {
      background: rgba(255,255,255,0.16);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      color: rgba(255,255,255,0.92);
      border: 1px solid rgba(255,255,255,0.28);
      border-radius: 999px;
      padding: 0.3rem 1rem;
      font-size: 0.82rem;
      letter-spacing: 0.08em;
      animation: heroFadeIn 1.4s cubic-bezier(0.22, 1, 0.36, 1) both;
    }
    .hero-family span:nth-child(1) { animation-delay: 0.3s; }
    .hero-family span:nth-child(2) { animation-delay: 0.5s; }
    .hero-family span:nth-child(3) { animation-delay: 0.7s; }

    /* ===== Scroll Reveal ===== */
    .reveal {
      opacity: 0;
      transform: translateY(36px);
      transition: opacity 0.75s ease, transform 0.75s cubic-bezier(0.22, 1, 0.36, 1);
    }
    .reveal.visible { opacity: 1; transform: translateY(0); }

    /* ===== å…±é€šã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
    section { padding: 4rem 1.5rem; max-width: 960px; margin: 0 auto; }
    .section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(1.6rem, 4vw, 2.1rem);
      color: var(--gold);
      text-align: center;
      margin-bottom: 2rem;
      letter-spacing: 0.05em;
    }
    .section-intro { text-align: center; margin-bottom: 2.5rem; color: var(--ink); opacity: 0.88; }

    /* ===== å®¶æ—ãƒ•ã‚©ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆè‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ ===== */
    #family-gallery {
      padding: 2.5rem 0;
      overflow: hidden;
      background: linear-gradient(135deg, #fdf9f4 0%, #f2ece2 100%);
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
    }
    .gallery-label {
      text-align: center;
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.35rem;
      color: var(--gold);
      margin-bottom: 1.5rem;
      letter-spacing: 0.07em;
    }
    .photo-track-wrap { overflow: hidden; }
    .photo-track {
      display: flex;
      gap: 1rem;
      width: max-content;
      animation: autoScroll 34s linear infinite;
    }
    /* gallery pause ã¯ JS ã§åˆ¶å¾¡ï¼ˆã‚¿ãƒƒãƒå¯¾å¿œã®ãŸã‚ï¼‰ */
    @keyframes autoScroll {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .photo-item {
      flex: 0 0 auto;
      width: 196px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: var(--shadow);
      position: relative;
      cursor: pointer;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }
    .photo-item:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: var(--shadow-strong);
    }
    .photo-item img {
      width: 100%;
      height: 230px;
      object-fit: cover;
      display: block;
    }
    .photo-item .pcap {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      padding: 0.55rem 0.75rem;
      background: linear-gradient(transparent, rgba(20,15,10,0.68));
      color: #fff;
      font-size: 0.76rem;
      text-align: center;
    }

    /* ===== å›ºå®šäºˆå®š ===== */
    .fixed-schedule { background: var(--gold-bg); border-radius: 20px; padding: 2rem; margin: 2rem 0; }
    .schedule-table { width: 100%; border-collapse: collapse; font-size: 1rem; }
    .schedule-table th, .schedule-table td { padding: 0.85rem 1rem; text-align: left; border-bottom: 1px solid var(--border); }
    .schedule-table th { color: var(--gold); font-weight: 600; width: 32%; }
    .schedule-table tr:last-child th, .schedule-table tr:last-child td { border-bottom: none; }
    .img-block { border-radius: 16px; overflow: hidden; margin: 2rem 0; box-shadow: var(--shadow); }
    .img-block img { width: 100%; height: 280px; object-fit: cover; display: block; transition: transform 0.6s ease; }
    .img-block:hover img { transform: scale(1.03); }
    .img-block .cap { padding: 0.75rem 1rem; background: var(--white); font-size: 0.85rem; color: var(--gold); text-align: center; }
    .detail { font-size: 0.8rem; color: #888; }
    .img-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin: 2rem 0; }
    @media (max-width: 600px) { .img-grid { grid-template-columns: 1fr; } }
    .img-grid .img-block { margin: 0; }
    .img-grid .img-block img { height: 200px; }

    /* ===== Optimizer ===== */
    .optimizer {
      background: linear-gradient(170deg, var(--white) 0%, #fdf6ee 100%);
      border-radius: 24px;
      padding: 2.5rem;
      box-shadow: var(--shadow);
    }

    /* Progress indicator */
    .progress-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.45rem;
      margin-bottom: 2.2rem;
    }
    .pdot {
      width: 11px; height: 11px;
      border-radius: 50%;
      background: var(--border);
      transition: background 0.4s ease, transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
    }
    .pdot.done {
      background: var(--gold);
      transform: scale(1.35);
      box-shadow: 0 0 0 3px rgba(166,124,82,0.22);
    }
    .pline {
      width: 36px; height: 2px;
      background: var(--border);
      border-radius: 1px;
      position: relative;
      overflow: hidden;
    }
    .pline::after {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--gold);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.4s ease 0.1s;
    }
    .pline.done::after { transform: scaleX(1); }
    .progress-count {
      font-size: 0.78rem;
      color: var(--gold);
      font-weight: 600;
      letter-spacing: 0.06em;
      margin-left: 0.3rem;
    }

    /* Choice group */
    .choice-group { margin-bottom: 2.2rem; }
    .choice-group h3 {
      font-size: 1.05rem;
      color: var(--gold);
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .choice-group.answered h3 { color: #6b5540; }
    .choice-group.answered h3::after {
      content: 'âœ“';
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px; height: 20px;
      background: var(--gold);
      color: #fff;
      border-radius: 50%;
      font-size: 0.68rem;
      font-weight: 700;
      animation: checkPop 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }
    @keyframes checkPop {
      from { transform: scale(0) rotate(-180deg); opacity: 0; }
      to   { transform: scale(1) rotate(0); opacity: 1; }
    }
    .choices { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.5rem; }

    /* Choice card */
    .choice-card {
      flex: 1 1 140px;
      min-width: 120px;
      padding: 1.05rem 0.75rem;
      border: 2px solid var(--border);
      border-radius: 14px;
      cursor: pointer;
      transition:
        border-color 0.2s,
        background 0.25s,
        opacity 0.3s,
        transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
        box-shadow 0.25s;
      text-align: center;
      background: var(--white);
      position: relative;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    .choice-card:hover {
      border-color: var(--gold-light);
      background: var(--gold-bg);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(166,124,82,0.13);
    }
    .choice-card.selected {
      border-color: var(--gold);
      background: var(--gold);
      transform: scale(1.05);
      box-shadow: 0 8px 28px rgba(166,124,82,0.38);
    }
    .choice-card.selected .c-label { color: rgba(255,255,255,0.95); font-weight: 600; }
    .choice-card.selected::after {
      content: 'âœ“';
      position: absolute;
      top: 6px; right: 9px;
      font-size: 0.68rem;
      color: rgba(255,255,255,0.9);
      font-weight: 700;
      animation: checkPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }
    .choices.has-sel .choice-card:not(.selected) {
      opacity: 0.5;
      transform: scale(0.96);
    }
    .choices.has-sel .choice-card:not(.selected):hover {
      opacity: 0.82;
      transform: scale(1.0) translateY(-2px);
    }
    .choice-card input { display: none; }
    .choice-card .c-icon {
      font-size: 1.65rem;
      margin-bottom: 0.4rem;
      display: block;
      transition: transform 0.3s ease;
    }
    .choice-card:hover .c-icon { transform: scale(1.25) rotate(6deg); }
    .choice-card.selected .c-icon {
      animation: iconBounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }
    @keyframes iconBounce {
      0%   { transform: scale(0.6) rotate(-12deg); }
      100% { transform: scale(1.15); }
    }
    .choice-card .c-label { font-size: 0.88rem; font-weight: 500; color: var(--ink); }

    /* Ripple */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      transform: scale(0);
      animation: rippleAnim 0.65s linear;
      pointer-events: none;
    }
    @keyframes rippleAnim { to { transform: scale(4.5); opacity: 0; } }

    /* Result banner */
    .result-banner {
      margin-top: 1.75rem;
      padding: 1.8rem 1.5rem 1.4rem;
      background: linear-gradient(135deg, #7a4f2d 0%, var(--gold) 50%, #d4a96a 100%);
      color: var(--white);
      border-radius: 18px;
      text-align: center;
      font-weight: 500;
      display: none;
      overflow: hidden;
      position: relative;
    }
    .result-banner.visible {
      display: block;
      animation: bannerReveal 0.7s cubic-bezier(0.22, 1, 0.36, 1) both;
    }
    @keyframes bannerReveal {
      from { opacity: 0; transform: scale(0.82) translateY(16px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }
    .result-banner::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(105deg, transparent 25%, rgba(255,255,255,0.22) 50%, transparent 75%);
      transform: translateX(-150%);
      animation: shimmer 2.4s ease 0.8s infinite;
    }
    @keyframes shimmer {
      from { transform: translateX(-150%); }
      to   { transform: translateX(200%); }
    }
    .sparkle {
      position: absolute;
      width: 5px; height: 5px;
      border-radius: 50%;
      background: rgba(255,255,255,0.85);
      pointer-events: none;
      animation: sparkleFly 1.4s ease-out both;
    }
    @keyframes sparkleFly {
      0%   { transform: scale(0) translate(0,0); opacity: 1; }
      100% { transform: scale(1.5) translate(var(--tx), var(--ty)); opacity: 0; }
    }
    .banner-eyebrow {
      font-size: 0.76rem;
      letter-spacing: 0.22em;
      opacity: 0.84;
      text-transform: uppercase;
      margin-bottom: 0.45rem;
    }
    .banner-name { font-size: 1.3rem; font-weight: 700; margin-bottom: 0.3rem; }
    .banner-desc { font-size: 0.88rem; opacity: 0.92; }
    .banner-cats { margin-top: 0.9rem; font-size: 1.1rem; opacity: 0.82; }

    /* ===== Plan blocks ===== */
    #plan-list { margin-top: 2rem; }
    .plan-block {
      background: var(--white);
      border-radius: 20px;
      overflow: hidden;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
      border: 2px solid transparent;
      transition: border-color 0.45s ease, box-shadow 0.45s ease;
      will-change: transform;
    }
    .plan-block.recommended {
      border-color: var(--gold);
      box-shadow: 0 18px 52px rgba(166,124,82,0.22);
    }
    .plan-block .plan-img { width: 100%; height: 220px; object-fit: cover; transition: transform 0.6s ease; display: block; }
    .plan-block:hover .plan-img { transform: scale(1.04); }
    .plan-block .plan-body { padding: 1.75rem 2rem; }
    .plan-block .plan-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.25rem; flex-wrap: wrap; }
    .plan-title { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; color: var(--gold); font-weight: 600; }
    .badge {
      display: inline-block;
      padding: 0.28rem 0.85rem;
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
      color: var(--white);
      font-size: 0.74rem;
      border-radius: 999px;
      letter-spacing: 0.05em;
      box-shadow: 0 3px 12px rgba(166,124,82,0.4);
      animation: badgePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }
    @keyframes badgePop {
      from { transform: scale(0); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }
    .plan-card { background: var(--gold-bg); border-radius: 12px; padding: 1.25rem 1.5rem; margin: 1rem 0; }
    .plan-card h4 { font-size: 0.95rem; color: var(--gold); margin-bottom: 0.6rem; }
    .plan-block ul { list-style: none; }
    .plan-block li { padding-left: 1rem; position: relative; margin-bottom: 0.4rem; font-size: 0.95rem; }
    .plan-block li::before { content: 'ãƒ»'; position: absolute; left: 0; color: var(--gold-light); }
    .plan-block .point { margin-top: 1rem; font-size: 0.9rem; opacity: 0.9; }
    .plan-block .point strong { color: var(--gold); }

    /* ===== Checklist ===== */
    .checklist { background: var(--gold-bg); border-radius: 20px; padding: 2rem; }
    .checklist ul { list-style: none; }
    .checklist li { padding: 0.6rem 0 0.6rem 2rem; position: relative; font-size: 0.95rem; }
    .checklist li::before { content: 'âœ“'; position: absolute; left: 0; color: var(--gold); font-weight: 700; }

    /* Closing photo grid */
    .closing-photos {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.8rem;
      margin: 2.5rem 0;
    }
    @media (max-width: 480px) { .closing-photos { grid-template-columns: repeat(2, 1fr); } }
    .cp-item {
      border-radius: 14px;
      overflow: hidden;
      box-shadow: var(--shadow);
      aspect-ratio: 1;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }
    .cp-item:hover { transform: scale(1.04) rotate(1.2deg); box-shadow: var(--shadow-strong); }
    .cp-item img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .closing { text-align: center; margin-top: 3rem; font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; color: var(--gold); }
    .closing-signature { text-align: center; margin-top: 0.75rem; font-size: 0.95rem; color: var(--gold-light); letter-spacing: 0.12em; }

    /* Nav hint */
    .nav-hint {
      position: fixed;
      bottom: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.78rem;
      color: var(--gold-light);
      letter-spacing: 0.12em;
      z-index: 10;
      animation: floatHint 2.2s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes floatHint {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50%       { transform: translateX(-50%) translateY(-6px); }
    }

    /* ===== ç”»é¢ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ ===== */
    .screen-flash {
      position: fixed; inset: 0;
      z-index: 9990; pointer-events: none;
      animation: flashOut 0.55s ease-out both;
    }
    @keyframes flashOut { 0% { opacity:1; } 100% { opacity:0; } }

    /* ===== ãƒ­ã‚±ãƒƒãƒˆ ===== */
    .rocket-fly {
      position: fixed; font-size: 2.8rem; line-height: 1;
      z-index: 5000; pointer-events: none;
      animation: rocketLaunch 1.15s cubic-bezier(0.2,0.8,0.3,1) both;
    }
    @keyframes rocketLaunch {
      0%   { transform: rotate(-45deg) scale(1);   opacity: 1; }
      55%  { opacity: 1; }
      100% { transform: rotate(-45deg) translate(110vw,-110vh) scale(0.4); opacity: 0; }
    }

    /* ===== ç´™å¹é›ª ===== */
    .conf-piece {
      position: fixed; border-radius: 3px;
      z-index: 4999; pointer-events: none;
      animation: confFly 1.05s ease-out both;
    }
    @keyframes confFly {
      0%   { transform: translate(0,0) rotate(0deg) scale(1); opacity: 1; }
      100% { transform: translate(var(--cx),var(--cy)) rotate(540deg) scale(0.2); opacity: 0; }
    }

    /* ===== å’²ç©ºãƒã‚¹ã‚³ãƒƒãƒˆ ===== */
    #mascot {
      position: fixed;
      bottom: 88px; right: 1.5rem;
      z-index: 3000;
      display: flex; flex-direction: column; align-items: center;
      gap: 0; pointer-events: none;
      opacity: 0;
      transform: translateX(220px);
      transition: opacity 0.35s, transform 0.5s cubic-bezier(0.34,1.56,0.64,1);
    }
    #mascot.show { opacity: 1; transform: translateX(0); }

    /* ã‚»ãƒªãƒ•å¹ãå‡ºã— */
    .m-bubble {
      position: relative;
      background: #fff5f8;
      border: 3.5px solid #E879A0;
      border-radius: 20px;
      padding: 0.55rem 1.1rem;
      font-weight: 900; font-size: 0.95rem;
      color: #C0397B; white-space: nowrap;
      box-shadow: 4px 4px 0 #E879A0;
      margin-bottom: 9px;
      text-align: center; line-height: 1.4;
    }
    .m-bubble::after {
      content: ''; position: absolute;
      bottom: -12px; left: 50%; transform: translateX(-50%);
      border: 6px solid transparent; border-top: 9px solid #E879A0;
    }
    .m-bubble::before {
      content: ''; position: absolute;
      bottom: -7px; left: 50%; transform: translateX(-50%);
      border: 5px solid transparent; border-top: 7px solid #fff5f8;
      z-index: 1;
    }
    /* ã‚­ãƒ£ãƒ©æœ¬ä½“ */
    .m-char { display: flex; flex-direction: column; align-items: center; position: relative; }
    /* ã‚ªãƒ¼ãƒ© */
    .m-aura {
      position: absolute; inset: -10px; border-radius: 50%;
      background: radial-gradient(circle, rgba(255,180,210,0.65) 0%, transparent 70%);
      animation: auraPulse 0.65s ease-in-out infinite alternate;
    }
    @keyframes auraPulse {
      from { transform: scale(0.88); opacity: 0.55; }
      to   { transform: scale(1.18); opacity: 1; }
    }
    /* å’²ç©ºãƒ•ã‚©ãƒˆ */
    .m-photo {
      width: 80px; height: 80px;
      object-fit: cover;
      object-position: top center;
      display: block;
      position: relative; z-index: 2;
      filter: drop-shadow(0 0 8px rgba(232,121,160,0.7));
    }
    /* ãƒœãƒ‡ã‚£ */
    .m-body { display: flex; gap: 2px; font-size: 1.65rem; margin-top: 3px; line-height: 1; }

    /* ç™»å ´ã‚¢ãƒ‹ãƒ¡ */
    #mascot.show .m-char { animation: charJump 0.6s cubic-bezier(0.34,1.56,0.64,1) both; }
    @keyframes charJump {
      0%   { transform: translateY(22px) scale(0.4); opacity:0; }
      55%  { transform: translateY(-16px) scale(1.1); opacity:1; }
      80%  { transform: translateY(-6px) scale(1.02); }
      100% { transform: translateY(0) scale(1); opacity:1; }
    }
    #mascot.show .m-bubble { animation: bubblePopIn 0.4s cubic-bezier(0.34,1.56,0.64,1) 0.18s both; }
    @keyframes bubblePopIn {
      from { transform: scale(0) translateY(10px); opacity:0; }
      to   { transform: scale(1) translateY(0); opacity:1; }
    }

    /* èˆˆå¥®çŠ¶æ…‹ï¼ˆ2ã€œ3å•ç›®ï¼‰ */
    #mascot.excited .m-char { animation: charExcited 0.28s ease-in-out 5 !important; }
    @keyframes charExcited {
      0%,100% { transform: rotate(0deg); }
      25%  { transform: rotate(-9deg) translateY(-5px); }
      75%  { transform: rotate(9deg)  translateY(-5px); }
    }
    #mascot.excited .m-aura { animation-duration: 0.3s; }

    /* æœ€èˆˆå¥®ï¼ˆ4å•å…¨é¸æŠï¼‰ */
    #mascot.max-excited .m-aura {
      animation-duration: 0.18s;
      background: radial-gradient(circle, rgba(255,120,180,0.85) 0%, transparent 70%);
    }
    #mascot.max-excited .m-char { animation: charMaxSpin 0.7s cubic-bezier(0.34,1.56,0.64,1) both !important; }
    @keyframes charMaxSpin {
      0%   { transform: scale(0.4) rotate(-200deg); opacity:0; }
      100% { transform: scale(1.12) rotate(0deg); opacity:1; }
    }
    #mascot.max-excited .m-body { animation: bodyBounce 0.22s ease-in-out infinite alternate; }
    @keyframes bodyBounce {
      from { transform: translateY(0); }
      to   { transform: translateY(-8px); }
    }
  </style>
</head>
<body>

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ -->
  <header class="hero">
    <div class="hero-bg"></div>
    <div class="hero-inner">
      <h1>æ—…ã®ã—ãŠã‚Š</h1>
      <p class="sub">èŒã€…å­ã®èª•ç”Ÿæ—¥</p>
      <p class="date">2æœˆ20æ—¥ï¼ˆé‡‘ï¼‰å¤œ ã€œ 2æœˆ21æ—¥ï¼ˆåœŸï¼‰</p>
      <div class="hero-family">
        <span>ğŸ± ãƒ­ã‚¤</span>
        <span>ğŸ± ãã¬</span>
        <span>ğŸ€ ç•™æ¨¹ ã‚ˆã‚Š</span>
      </div>
    </div>
  </header>

  <!-- å®¶æ—ãƒ•ã‚©ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆè‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ -->
  <div id="family-gallery" class="reveal">
    <p class="gallery-label">ãƒ­ã‚¤ãƒ»ãã¬ã‚‚ãŠç•™å®ˆç•ªã‚ˆã‚ã—ãã­ ğŸ±</p>
    <div class="photo-track-wrap">
      <div class="photo-track">
        <!-- 1ã‚»ãƒƒãƒˆç›® -->
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4236.jpg" alt="ãƒ­ã‚¤ãƒ»ãã¬"><div class="pcap">ãƒ­ã‚¤ ï¼† ãã¬</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_3673.jpg" alt="ãã¬"><div class="pcap">ãã¬ã€ãã¤ã‚ãä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4166.JPG" alt="ãã¬"><div class="pcap">ãã‚Šã£ã¨ãã¬</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4215.JPG" alt="ãã¬ã¨å’²ç©º"><div class="pcap">ãã¬ã¨å’²ç©º</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4310.jpg" alt="ãƒ­ã‚¤"><div class="pcap">ãƒ­ã‚¤ã€è¦‹å¼µã‚Šä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4364.jpg" alt="ãƒ­ã‚¤"><div class="pcap">ãƒ­ã‚¤ã€å¾…æ©Ÿä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4379.JPG" alt=""><div class="pcap">å’²ç©ºã€ãŠã‚ã‹ã—ä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4395.JPG" alt=""><div class="pcap">å’²ç©ºã€ãŸã®ã—ã‹ã£ãŸã­</div></div>
        <!-- 2ã‚»ãƒƒãƒˆç›®ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—ï¼‰ -->
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4236.jpg" alt="ãƒ­ã‚¤ãƒ»ãã¬"><div class="pcap">ãƒ­ã‚¤ ï¼† ãã¬</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_3673.jpg" alt="ãã¬"><div class="pcap">ãã¬ã€ãã¤ã‚ãä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4166.JPG" alt="ãã¬"><div class="pcap">ãã‚Šã£ã¨ãã¬</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4215.JPG" alt="ãã¬ã¨å’²ç©º"><div class="pcap">ãã¬ã¨å’²ç©º</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4310.jpg" alt="ãƒ­ã‚¤"><div class="pcap">ãƒ­ã‚¤ã€è¦‹å¼µã‚Šä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4364.jpg" alt="ãƒ­ã‚¤"><div class="pcap">ãƒ­ã‚¤ã€å¾…æ©Ÿä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4379.JPG" alt=""><div class="pcap">å’²ç©ºã€ãŠã‚ã‹ã—ä¸­</div></div>
        <div class="photo-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4395.JPG" alt=""><div class="pcap">å’²ç©ºã€ãŸã®ã—ã‹ã£ãŸã­</div></div>
      </div>
    </div>
  </div>

  <!-- æ±ºã¾ã£ã¦ã„ã‚‹äºˆå®š -->
  <section id="fixed" class="reveal">
    <h2 class="section-title">æ±ºã¾ã£ã¦ã„ã‚‹äºˆå®š</h2>
    <p class="section-intro">åœŸæ›œã®ãƒ¡ã‚¤ãƒ³äºˆå®šã¯ã“ã¡ã‚‰ã€‚é‡‘æ›œå¤œã¨åœŸæ›œã®éã”ã—æ–¹ã§ã€æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ä¸€ç·’ã«é¸ã³ã¾ã—ã‚‡ã†ã€‚</p>
    <div class="img-grid">
      <div class="img-block">
        <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&q=80" alt="æ¸‹è°·ãƒ»è²·ã„ç‰©">
        <p class="cap">åœŸæ›œãƒ»æ—¥ä¸­ â€” æ¸‹è°·ãªã©ã§è²·ã„ç‰©</p>
      </div>
      <div class="img-block">
        <img src="https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800&q=80" alt="ä»£å®˜å±±ãƒ»ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³">
        <p class="cap">åœŸæ›œ 19:00ã€œ â€” ã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</p>
      </div>
    </div>
    <div class="fixed-schedule">
      <table class="schedule-table">
        <tr><th>åœŸæ›œãƒ»æ—¥ä¸­</th><td>æ¸‹è°·ãªã©ã§è²·ã„ç‰©</td></tr>
        <tr><th>åœŸæ›œãƒ»19:00ã€œ</th><td>
          <strong>ã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬</strong>ï¼ˆä»£å®˜å±±ï¼‰<br>
          <span class="detail">ã‚·ã‚§ãƒ•ã®ã“ã ã‚ã‚ŠãŒè©°ã¾ã£ãŸãƒ•ãƒ«ã‚³ãƒ¼ã‚¹ ï¼ Â¥13,200ï¼ˆç¨è¾¼ï¼‰ï¼ ãŠä¸€äººæ§˜</span><br>
          <span class="detail">ãƒ†ãƒ¼ãƒ–ãƒ«å¸­ãƒ»ç¦ç…™ ï¼ æ»åœ¨ç›®å®‰ 2æ™‚é–“30åˆ†</span>
        </td></tr>
      </table>
    </div>
  </section>

  <!-- ãƒ—ãƒ©ãƒ³æœ€é©åŒ– -->
  <section id="optimizer-section" class="reveal">
    <h2 class="section-title">ã‚ãªãŸã®å¸Œæœ›ã‚’é¸ã‚“ã§ãã ã•ã„</h2>
    <p class="section-intro">ä¸‹ã®é¸æŠè‚¢ã‚’é¸ã¶ã¨ã€ã´ã£ãŸã‚Šã®ãƒ—ãƒ©ãƒ³ãŒãŠã™ã™ã‚è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    <div class="optimizer">

      <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ -->
      <div class="progress-row">
        <div class="pdot" id="pdot-0"></div>
        <div class="pline" id="pline-0"></div>
        <div class="pdot" id="pdot-1"></div>
        <div class="pline" id="pline-1"></div>
        <div class="pdot" id="pdot-2"></div>
        <div class="pline" id="pline-2"></div>
        <div class="pdot" id="pdot-3"></div>
        <span class="progress-count" id="progress-count">0 / 4</span>
      </div>

      <div class="choice-group" id="cg-friday">
        <h3>é‡‘æ›œã®å¤œã¯ã©ã†éã”ã—ãŸã„ï¼Ÿ</h3>
        <div class="choices" data-q="friday">
          <label class="choice-card" data-value="relax">
            <input type="radio" name="friday" value="relax">
            <span class="c-icon">ğŸ </span><span class="c-label">ã‚†ã£ãŸã‚Šè‡ªå®…ãƒ»è¿‘å ´</span>
          </label>
          <label class="choice-card" data-value="go_out">
            <input type="radio" name="friday" value="go_out">
            <span class="c-icon">ğŸ¸</span><span class="c-label">ãƒãƒ¼ãƒ»ãƒ©ã‚¦ãƒ³ã‚¸ã§éæ—¥å¸¸</span>
          </label>
          <label class="choice-card" data-value="movie">
            <input type="radio" name="friday" value="movie">
            <span class="c-icon">ğŸ¬</span><span class="c-label">æ˜ ç”»ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆ</span>
          </label>
          <label class="choice-card" data-value="sweets">
            <input type="radio" name="friday" value="sweets">
            <span class="c-icon">ğŸ°</span><span class="c-label">ã‚¹ã‚¤ãƒ¼ãƒ„ãƒ»ã‚«ãƒ•ã‚§å·¡ã‚Š</span>
          </label>
          <label class="choice-card" data-value="stay_late">
            <input type="radio" name="friday" value="stay_late">
            <span class="c-icon">ğŸŒƒ</span><span class="c-label">å¤œæ›´ã‹ã—ãƒ»ãƒŠã‚¤ãƒˆãƒ©ã‚¤ãƒ•</span>
          </label>
        </div>
      </div>

      <div class="choice-group" id="cg-saturday">
        <h3>åœŸæ›œã¯ä½•ã‚’é‡è¦–ã—ãŸã„ï¼Ÿ</h3>
        <div class="choices" data-q="saturday">
          <label class="choice-card" data-value="shopping">
            <input type="radio" name="saturday" value="shopping">
            <span class="c-icon">ğŸ›ï¸</span><span class="c-label">è²·ã„ç‰©ã‚’ãŸã£ã·ã‚Š</span>
          </label>
          <label class="choice-card" data-value="daikanyama">
            <input type="radio" name="saturday" value="daikanyama">
            <span class="c-icon">â˜•</span><span class="c-label">ä»£å®˜å±±ã®é›°å›²æ°—</span>
          </label>
          <label class="choice-card" data-value="balance">
            <input type="radio" name="saturday" value="balance">
            <span class="c-icon">âš–ï¸</span><span class="c-label">ãƒãƒ©ãƒ³ã‚¹ã‚ˆã</span>
          </label>
          <label class="choice-card" data-value="photo">
            <input type="radio" name="saturday" value="photo">
            <span class="c-icon">ğŸ“·</span><span class="c-label">ãƒ•ã‚©ãƒˆã‚¹ãƒãƒƒãƒˆãƒ»æ˜ ãˆ</span>
          </label>
          <label class="choice-card" data-value="gourmet">
            <input type="radio" name="saturday" value="gourmet">
            <span class="c-icon">ğŸ½ï¸</span><span class="c-label">ãƒ©ãƒ³ãƒã‚‚å«ã‚ã¦é£Ÿã‚’æ¥½ã—ã‚€</span>
          </label>
        </div>
      </div>

      <div class="choice-group" id="cg-pace">
        <h3>ãƒšãƒ¼ã‚¹ã¯ã©ã‚ŒãŒã„ã„ï¼Ÿ</h3>
        <div class="choices" data-q="pace">
          <label class="choice-card" data-value="easy">
            <input type="radio" name="pace" value="easy">
            <span class="c-icon">ğŸŒ™</span><span class="c-label">ã‚†ã£ãŸã‚Š</span>
          </label>
          <label class="choice-card" data-value="medium">
            <input type="radio" name="pace" value="medium">
            <span class="c-icon">ğŸ‚</span><span class="c-label">ã»ã©ã»ã©</span>
          </label>
          <label class="choice-card" data-value="full">
            <input type="radio" name="pace" value="full">
            <span class="c-icon">âœ¨</span><span class="c-label">ã—ã£ã‹ã‚Šæ¥½ã—ã‚€</span>
          </label>
        </div>
      </div>

      <div class="choice-group" id="cg-vibe">
        <h3>ã©ã‚“ãªç‰¹åˆ¥æ„Ÿã‚’å‘³ã‚ã„ãŸã„ï¼Ÿ</h3>
        <div class="choices" data-q="vibe">
          <label class="choice-card" data-value="classic">
            <input type="radio" name="vibe" value="classic">
            <span class="c-icon">ğŸ’</span><span class="c-label">ç‹é“ãƒ»å®šç•ªã®ç‰¹åˆ¥æ„Ÿ</span>
          </label>
          <label class="choice-card" data-value="photo_friendly">
            <input type="radio" name="vibe" value="photo_friendly">
            <span class="c-icon">âœ¨</span><span class="c-label">ãƒ•ã‚©ãƒˆæ˜ ãˆãƒ»æ€ã„å‡ºã«æ®‹ã‚‹</span>
          </label>
          <label class="choice-card" data-value="gourmet">
            <input type="radio" name="vibe" value="gourmet">
            <span class="c-icon">ğŸ·</span><span class="c-label">é£Ÿã‚’ã¨ã“ã¨ã‚“æ¥½ã—ã‚€</span>
          </label>
          <label class="choice-card" data-value="non_daily">
            <input type="radio" name="vibe" value="non_daily">
            <span class="c-icon">ğŸŒŸ</span><span class="c-label">éæ—¥å¸¸ãƒ»ã¡ã‚‡ã£ã¨å†’é™º</span>
          </label>
        </div>
      </div>

      <div class="result-banner" id="result-banner">
        <div class="banner-eyebrow">âœ¦ ã‚ãªãŸã«ãŠã™ã™ã‚ âœ¦</div>
        <div class="banner-name" id="result-plan-name"></div>
        <div class="banner-desc" id="result-plan-desc"></div>
        <div class="banner-cats">ğŸ± ãƒ­ã‚¤ãƒ»ãã¬ã‚‚å¿œæ´ã—ã¦ã‚‹ã‚ˆ ğŸ±</div>
      </div>
    </div>
  </section>

  <!-- ãƒ—ãƒ©ãƒ³ä¸€è¦§ -->
  <section id="plans" class="reveal">
    <h2 class="section-title">ãƒ—ãƒ©ãƒ³ä¸€è¦§</h2>
    <p class="section-intro">é¸æŠã—ãŸå¸Œæœ›ã«åˆã‚ã›ã¦ã€ãŠã™ã™ã‚ã®ãƒ—ãƒ©ãƒ³ãŒä¸Šã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    <div id="plan-list">

      <div class="plan-block" data-plan="A">
        <img class="plan-img" src="https://images.unsplash.com/photo-1557925923-cd4648e211a0?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³A">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Aï¼šé‡‘æ›œã¯ã‚†ã£ãŸã‚Šã€åœŸæ›œã¯æ¸‹è°·é›†ä¸­</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>è‡ªå®…ã¾ãŸã¯è¿‘å ´ã§èª•ç”Ÿæ—¥å‰å¤œã®ãƒ‡ã‚£ãƒŠãƒ¼ï¼ˆæ‰‹ä½œã‚Š or ãŠæ°—ã«å…¥ã‚Šåº—ï¼‰</li>
            <li>ç¿Œæ—¥ã«å‚™ãˆã¦æ—©ã‚ã«å°±å¯</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>åˆå‰ï¼šæ¸‹è°·ã§è²·ã„ç‰©ï¼ˆã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«å‘¨è¾ºãƒ»ãƒãƒ¼ã‚¯ã‚·ãƒ†ã‚£ç­‰ï¼‰</li>
            <li>åˆå¾Œï¼šã‚«ãƒ•ã‚§ã§ä¼‘æ†© â†’ ä»£å®˜å±±ã¸ç§»å‹•ã—ã€19æ™‚ã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ã¸</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>ç„¡ç†ã®ãªã„ãƒšãƒ¼ã‚¹ã§ã€è²·ã„ç‰©ã¨é£Ÿäº‹ã‚’æ¥½ã—ã‚ã‚‹ã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="B">
        <img class="plan-img" src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³B">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Bï¼šé‡‘æ›œã‹ã‚‰éæ—¥å¸¸æ°—åˆ†</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>éƒ½å†…ã®ãƒãƒ¼ã‚„ãƒ©ã‚¦ãƒ³ã‚¸ã§å‰å¤œç¥­ï¼ˆå¤œæ™¯ã®è¦‹ãˆã‚‹ã‚¹ãƒãƒƒãƒˆãªã©ï¼‰</li>
            <li>ãƒ›ãƒ†ãƒ«ã®ãƒãƒ¼ã‚„é«˜å±¤ãƒ“ãƒ«ã®ãƒ©ã‚¦ãƒ³ã‚¸ã§ä¹¾æ¯</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>åˆå‰ã€œæ˜¼ï¼šæ¸‹è°·ã§è²·ã„ç‰©</li>
            <li>15æ™‚é ƒï¼šä»£å®˜å±±ã«ç§»å‹•ã—ã€ã‚«ãƒ•ã‚§ã‚„é›‘è²¨åº—ã§ã¶ã‚‰ã‚Š</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>å‰æ—¥ã‹ã‚‰ç‰¹åˆ¥æ„Ÿã‚’å‡ºã—ãŸã„æ–¹ã«ã€‚ä»£å®˜å±±ã§åˆå¾Œã‚’éã”ã™ã¨å¤œã®äºˆå®šã«ã‚¹ãƒ ãƒ¼ã‚ºã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="C">
        <img class="plan-img" src="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³C">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Cï¼šé‡‘æ›œã¯æ˜ ç”»ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã€åœŸæ›œã¯è²·ã„ç‰©ãƒ¡ã‚¤ãƒ³</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>æ˜ ç”»é¤¨ã§æœ€æ–°ä½œã‚„èŒã€…å­ã®å¥½ããªã‚¸ãƒ£ãƒ³ãƒ«ã®æ˜ ç”»</li>
            <li>ä¸Šæ˜ å¾Œã«è»½ãé£Ÿäº‹ã‚„ã‚¹ã‚¤ãƒ¼ãƒ„</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>æ¸‹è°·ã§è²·ã„ç‰©ï¼ˆç™¾è²¨åº—ãƒ»é›‘è²¨ãƒ»ã‚¢ãƒ‘ãƒ¬ãƒ«ãªã©ï¼‰</li>
            <li>åˆå¾Œã¯ä»£å®˜å±±ã¸ã€‚ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³å‰ã«ãƒ•ã‚©ãƒˆã‚¹ãƒãƒƒãƒˆã‚„ã‚«ãƒ•ã‚§ã§ã²ã¨ä¼‘ã¿</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>æ˜ ç”»å¥½ããªã‚‰é‡‘æ›œã®å¤œãŒç‰¹åˆ¥ãªæ€ã„å‡ºã«ã€‚åœŸæ›œã¯è²·ã„ç‰©ã«é›†ä¸­ã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="D">
        <img class="plan-img" src="https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³D">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Dï¼šä»£å®˜å±±ã‚’ä¸¸ä¸€æ—¥æ¥½ã—ã‚€</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>è‡ªå®…ã§ã‚±ãƒ¼ã‚­ã¨ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ï¼ˆã¾ãŸã¯ãƒãƒ³ã‚¢ãƒ«ï¼‰ã§å‰å¤œç¥ã„</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>åˆå‰ï¼šæ¸‹è°·ã§è²·ã„ç‰©ï¼ˆåˆå‰ä¸­ã§åˆ‡ã‚Šä¸Šã’ï¼‰</li>
            <li>æ˜¼éãï¼šä»£å®˜å±±ã¸ã€‚ã‚«ãƒ•ã‚§ãƒ»é›‘è²¨ãƒ»ãƒ–ãƒƒã‚¯ã‚·ãƒ§ãƒƒãƒ—ãƒ»æ´‹æœãªã©ã§æ•£ç­–</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>ä»£å®˜å±±ã®é›°å›²æ°—ã‚’ãŸã£ã·ã‚Šå‘³ã‚ã„ãŸã„æ–¹ã«ã€‚ç§»å‹•ã‚‚å°‘ãªãåŠ¹ç‡çš„ã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="E">
        <img class="plan-img" src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³E">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Eï¼šé‡‘æ›œã¯ã‚¹ã‚¤ãƒ¼ãƒ„å·¡ã‚Šã€åœŸæ›œã¯ãƒ•ã‚©ãƒˆæ˜ ãˆ</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>éƒ½å†…ã®ã‚¹ã‚¤ãƒ¼ãƒ„ã‚„ã‚«ãƒ•ã‚§ã‚’2ã€œ3åº—ã¯ã—ã”ï¼ˆä»£å®˜å±±ãƒ»æµæ¯”å¯¿ãƒ»æ¸‹è°·ãªã©ï¼‰</li>
            <li>ãƒ•ã‚©ãƒˆã‚¸ã‚§ãƒ‹ãƒƒã‚¯ãªã‚±ãƒ¼ã‚­ã§å‰å¤œç¥ã„</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>åˆå‰ï¼šæ¸‹è°·ã§è²·ã„ç‰©</li>
            <li>åˆå¾Œï¼šä»£å®˜å±±ã¸ã€‚ãƒ•ã‚©ãƒˆã‚¹ãƒãƒƒãƒˆã‚„æ˜ ãˆã‚«ãƒ•ã‚§ã§æ’®å½±ã—ãªãŒã‚‰æ•£ç­–</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>å†™çœŸã«æ®‹ã‚‹æ€ã„å‡ºã‚’ãŸãã•ã‚“ä½œã‚ŠãŸã„æ–¹ã«ã€‚é‡‘æ›œã‹ã‚‰æ˜ ãˆã‚’æ„è­˜ã—ãŸãƒ«ãƒ¼ãƒˆã§ã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="F">
        <img class="plan-img" src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³F">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Fï¼šé‡‘æ›œã¯å¤œæ›´ã‹ã—ã€åœŸæ›œã¯é£Ÿã‚’å ªèƒ½</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>éƒ½å†…ã®ãƒãƒ¼ã‚„ãƒŠã‚¤ãƒˆã‚¹ãƒãƒƒãƒˆã§å¤œæ›´ã‹ã—ï¼ˆå¤œæ™¯ãƒ©ã‚¦ãƒ³ã‚¸ãƒ»ãƒ©ã‚¤ãƒ–ãƒãƒ¼ãªã©ï¼‰</li>
            <li>ç¿Œæ—¥ã¯å°‘ã—é…ã‚ã‚¹ã‚¿ãƒ¼ãƒˆã§ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>é…ã‚ã®ãƒ–ãƒ©ãƒ³ãƒ or æ¸‹è°·ã§ãƒ©ãƒ³ãƒã‚’ã‚†ã£ãã‚Š</li>
            <li>è²·ã„ç‰©ã®åˆé–“ã«ã‚¹ã‚¤ãƒ¼ãƒ„ã‚„ãƒ‰ãƒªãƒ³ã‚¯ã§ä¼‘æ†©</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰ã§ãƒ¡ã‚¤ãƒ³ã®ãƒ‡ã‚£ãƒŠãƒ¼</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>é£Ÿã‚’è»¸ã«ä¸€æ—¥æ¥½ã—ã¿ãŸã„æ–¹ã«ã€‚é‡‘æ›œã®å¤œã‚‚åœŸæ›œã®ãƒ©ãƒ³ãƒã‚‚ãƒ‡ã‚£ãƒŠãƒ¼ã‚‚æº€å–«ã€‚</p>
        </div>
      </div>

      <div class="plan-block" data-plan="G">
        <img class="plan-img" src="https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=800&q=80" alt="ãƒ—ãƒ©ãƒ³G">
        <div class="plan-body">
          <div class="plan-header">
            <span class="plan-title">ãƒ—ãƒ©ãƒ³Gï¼šã»ã©ã»ã©ã«ã€ã„ã‚ã„ã‚æ¥½ã—ã‚€</span>
            <span class="badge recommended-badge" style="display:none;">ã‚ãªãŸã«ãŠã™ã™ã‚</span>
          </div>
          <div class="plan-card"><h4>é‡‘æ›œå¤œ</h4><ul>
            <li>è‡ªå®…ã§ã‚±ãƒ¼ã‚­ã‚„è»½ã„é£Ÿäº‹ã€ã¾ãŸã¯è¿‘å ´ã®ã‚«ãƒ•ã‚§ã§ä¸€æ¯</li>
            <li>ç„¡ç†ã›ãšç¿Œæ—¥ã«å‚™ãˆã‚‹</li>
          </ul></div>
          <div class="plan-card"><h4>åœŸæ›œ</h4><ul>
            <li>æ¸‹è°·ã§è²·ã„ç‰©ï¼‹ä»£å®˜å±±æ•£ç­–ã‚’ã»ã©ã»ã©ã«</li>
            <li>è©°ã‚è¾¼ã¿ã™ããšã€ã‚«ãƒ•ã‚§ä¼‘æ†©ã‚„ãƒ•ã‚©ãƒˆã‚¿ã‚¤ãƒ ã‚‚æŒŸã‚€</li>
            <li>19æ™‚ï¼šã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ï¼ˆä»£å®˜å±±ï¼‰</li>
          </ul></div>
          <p class="point"><strong>ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆï¼š</strong>ã€Œå…¨éƒ¨ã‚„ã‚‹ã€ã‚ˆã‚Šã€Œç„¡ç†ãªãæ¥½ã—ã‚€ã€æ´¾ã«ã€‚ãƒãƒ©ãƒ³ã‚¹å‹ã§ç–²ã‚Œã«ãã„ã€‚</p>
        </div>
      </div>

    </div>
  </section>

  <!-- ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
  <section id="checklist" class="reveal">
    <h2 class="section-title">ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãƒ»ãƒ¡ãƒ¢</h2>
    <div class="img-block">
      <img src="https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=1200&q=80" alt="æ±äº¬">
      <p class="cap">èŒã€…å­ã€ç´ æ•µãªèª•ç”Ÿæ—¥ã«ãªã‚Šã¾ã™ã‚ˆã†ã«</p>
    </div>
    <div class="checklist">
      <ul>
        <li>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®äºˆç´„ç¢ºèªï¼ˆã‚»ãƒ«ã‚µãƒ«ã‚µãƒ¼ãƒ¬ãƒ»ä»£å®˜å±±ãƒ»19æ™‚ / äºˆç´„ç•ªå·ï¼šNN2LCDVF57ï¼‰</li>
        <li>é‡‘æ›œå¤œã®äºˆç´„ãŒå¿…è¦ãªå ´åˆã¯æ—©ã‚ã«</li>
        <li>åœŸæ›œã®å¤©æ°—ãƒ»æœè£…ã®ç¢ºèª</li>
        <li>ä»£å®˜å±±ã¸ã®çµŒè·¯ï¼ˆæ¸‹è°·ã‹ã‚‰ã®é›»è»Šãƒ»ãƒã‚¹ãªã©ï¼‰</li>
        <li>èª•ç”Ÿæ—¥ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã®ç”¨æ„</li>
      </ul>
    </div>
    <div class="closing-photos">
      <div class="cp-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4379.JPG" alt=""></div>
      <div class="cp-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4215.JPG" alt=""></div>
      <div class="cp-item"><img src="ãƒ­ã‚¤ãã¬/IMG_4395.JPG" alt=""></div>
    </div>
    <p class="closing">â€” èŒã€…å­ã€ç´ æ•µãªèª•ç”Ÿæ—¥ã«ãªã‚Šã¾ã™ã‚ˆã†ã« â€”</p>
    <p class="closing-signature">ç•™æ¨¹</p>
  </section>

  <!-- å’²ç©ºãƒã‚¹ã‚³ãƒƒãƒˆ -->
  <div id="mascot">
    <div class="m-bubble"><span id="m-text">ãˆã¸ã¸ âœ¨ ã„ã„ã­ï¼</span></div>
    <div class="m-char">
      <div class="m-aura"></div>
      <img class="m-photo" src="ãƒ­ã‚¤ãã¬/ãƒ­ã‚¤ãã¬sakuramascot.png.png" alt="å’²ç©º">
      <div class="m-body">ğŸŒ¸ğŸŒ¸</div>
    </div>
  </div>

  <p class="nav-hint">â†“ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ç¶šãã‚’èª­ã‚€</p>

  <script>
(function () {
  /* ===== ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« Reveal ===== */
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (e) {
      if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
    });
  }, { threshold: 0.07 });
  document.querySelectorAll('.reveal').forEach(function (el) { observer.observe(el); });

  /* ===== Optimizer data ===== */
  var planIds = ['A','B','C','D','E','F','G'];
  var scores = {
    friday: {
      relax:    { A:2, B:0, C:0, D:2, E:0, F:0, G:1 },
      go_out:   { A:0, B:2, C:0, D:0, E:0, F:0, G:0 },
      movie:    { A:0, B:0, C:2, D:0, E:0, F:0, G:0 },
      sweets:   { A:0, B:0, C:0, D:0, E:2, F:0, G:0 },
      stay_late:{ A:0, B:0, C:0, D:0, E:0, F:2, G:0 }
    },
    saturday: {
      shopping:   { A:2, B:0, C:2, D:0, E:0, F:0, G:1 },
      daikanyama: { A:0, B:2, C:0, D:2, E:0, F:0, G:0 },
      balance:    { A:1, B:1, C:1, D:1, E:0, F:0, G:2 },
      photo:      { A:0, B:0, C:0, D:0, E:2, F:0, G:1 },
      gourmet:    { A:0, B:0, C:0, D:0, E:0, F:2, G:0 }
    },
    pace: {
      easy:   { A:2, B:0, C:0, D:2, E:0, F:0, G:0 },
      medium: { A:0, B:0, C:0, D:0, E:2, F:0, G:2 },
      full:   { A:0, B:2, C:2, D:0, E:0, F:1, G:0 }
    },
    vibe: {
      classic:       { A:1, B:0, C:0, D:0, E:0, F:0, G:2 },
      photo_friendly:{ A:0, B:0, C:0, D:0, E:2, F:0, G:0 },
      gourmet:       { A:0, B:0, C:0, D:0, E:0, F:2, G:0 },
      non_daily:     { A:0, B:2, C:0, D:0, E:0, F:0, G:0 }
    }
  };
  var planNames = {
    A:'ãƒ—ãƒ©ãƒ³Aï¼šé‡‘æ›œã¯ã‚†ã£ãŸã‚Šã€åœŸæ›œã¯æ¸‹è°·é›†ä¸­',
    B:'ãƒ—ãƒ©ãƒ³Bï¼šé‡‘æ›œã‹ã‚‰éæ—¥å¸¸æ°—åˆ†',
    C:'ãƒ—ãƒ©ãƒ³Cï¼šé‡‘æ›œã¯æ˜ ç”»ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã€åœŸæ›œã¯è²·ã„ç‰©ãƒ¡ã‚¤ãƒ³',
    D:'ãƒ—ãƒ©ãƒ³Dï¼šä»£å®˜å±±ã‚’ä¸¸ä¸€æ—¥æ¥½ã—ã‚€',
    E:'ãƒ—ãƒ©ãƒ³Eï¼šé‡‘æ›œã¯ã‚¹ã‚¤ãƒ¼ãƒ„å·¡ã‚Šã€åœŸæ›œã¯ãƒ•ã‚©ãƒˆæ˜ ãˆ',
    F:'ãƒ—ãƒ©ãƒ³Fï¼šé‡‘æ›œã¯å¤œæ›´ã‹ã—ã€åœŸæ›œã¯é£Ÿã‚’å ªèƒ½',
    G:'ãƒ—ãƒ©ãƒ³Gï¼šã»ã©ã»ã©ã«ã€ã„ã‚ã„ã‚æ¥½ã—ã‚€'
  };
  var planDescs = {
    A:'ã‚†ã£ãŸã‚Šãƒšãƒ¼ã‚¹ã§ã€è²·ã„ç‰©ã¨é£Ÿäº‹ã‚’æ¥½ã—ã‚€ãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    B:'å‰æ—¥ã‹ã‚‰éæ—¥å¸¸ã§ã€ä»£å®˜å±±ã®åˆå¾Œã‚‚æº€å–«ã™ã‚‹ãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    C:'é‡‘æ›œã¯æ˜ ç”»ã§æ€ã„å‡ºã¥ãã‚Šã€åœŸæ›œã¯è²·ã„ç‰©ãƒ¡ã‚¤ãƒ³ã®ãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    D:'ä»£å®˜å±±ã®é›°å›²æ°—ã‚’ãŸã£ã·ã‚Šå‘³ã‚ã†ã€åŠ¹ç‡çš„ãªãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    E:'å†™çœŸã«æ®‹ã‚‹æ€ã„å‡ºã‚’ãŸãã•ã‚“ä½œã‚‹ã€æ˜ ãˆé‡è¦–ã®ãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    F:'é£Ÿã‚’è»¸ã«é‡‘æ›œå¤œã‹ã‚‰åœŸæ›œãƒ‡ã‚£ãƒŠãƒ¼ã¾ã§å ªèƒ½ã™ã‚‹ãƒ—ãƒ©ãƒ³ã§ã™ã€‚',
    G:'ç„¡ç†ãªããƒãƒ©ãƒ³ã‚¹ã‚ˆãæ¥½ã—ã‚€ã€ã»ã©ã»ã©æ´¾å‘ã‘ã®ãƒ—ãƒ©ãƒ³ã§ã™ã€‚'
  };
  var qKeys = ['friday','saturday','pace','vibe'];
  var cgMap = { friday:'cg-friday', saturday:'cg-saturday', pace:'cg-pace', vibe:'cg-vibe' };
  var choices = { friday:null, saturday:null, pace:null, vibe:null };

  function getRanked() {
    var tot = { A:0,B:0,C:0,D:0,E:0,F:0,G:0 };
    qKeys.forEach(function(k) {
      var v = choices[k];
      if (v && scores[k] && scores[k][v]) {
        planIds.forEach(function(p) { tot[p] += scores[k][v][p] || 0; });
      }
    });
    return planIds.slice().sort(function(a,b) { return tot[b]-tot[a]; });
  }

  /* Progress */
  function updateProgress() {
    var cnt = qKeys.filter(function(k) { return choices[k]; }).length;
    document.getElementById('progress-count').textContent = cnt + ' / 4';
    qKeys.forEach(function(k, i) {
      var dot = document.getElementById('pdot-' + i);
      choices[k] ? dot.classList.add('done') : dot.classList.remove('done');
      if (i > 0) {
        var line = document.getElementById('pline-' + (i-1));
        choices[qKeys[i-1]] ? line.classList.add('done') : line.classList.remove('done');
      }
    });
  }

  /* Sparkles */
  function spawnSparkles(banner) {
    for (var i = 0; i < 14; i++) {
      (function(i) {
        var sp = document.createElement('span');
        sp.className = 'sparkle';
        var ang = (i / 14) * 360;
        var d = 45 + Math.random() * 55;
        sp.style.cssText =
          'left:50%;top:50%;' +
          '--tx:' + (Math.cos(ang*Math.PI/180)*d) + 'px;' +
          '--ty:' + (Math.sin(ang*Math.PI/180)*d) + 'px;' +
          'animation-delay:' + (Math.random()*0.25) + 's';
        banner.appendChild(sp);
        setTimeout(function() { if (sp.parentNode) sp.parentNode.removeChild(sp); }, 1600);
      })(i);
    }
  }

  /* FLIP reorder */
  function updateUI() {
    var ranked = getRanked();
    var allSel = qKeys.every(function(k) { return choices[k]; });
    var list = document.getElementById('plan-list');
    var blocks = [].slice.call(list.querySelectorAll('.plan-block'));

    /* FLIP step 1 â€“ record current tops */
    var firstY = {};
    blocks.forEach(function(b) { firstY[b.dataset.plan] = b.getBoundingClientRect().top; });

    /* Clear badges */
    blocks.forEach(function(b) {
      b.classList.remove('recommended');
      var badge = b.querySelector('.recommended-badge');
      if (badge) badge.style.display = 'none';
    });

    /* Recommendation */
    if (allSel) {
      var best = ranked[0];
      var bestBlock = list.querySelector('[data-plan="'+best+'"]');
      if (bestBlock) {
        bestBlock.classList.add('recommended');
        var badge = bestBlock.querySelector('.recommended-badge');
        if (badge) badge.style.display = 'inline-block';
      }
      var banner = document.getElementById('result-banner');
      document.getElementById('result-plan-name').textContent = planNames[best];
      document.getElementById('result-plan-desc').textContent = planDescs[best];
      if (!banner.classList.contains('visible')) {
        banner.classList.add('visible');
        spawnSparkles(banner);
      }
    } else {
      document.getElementById('result-banner').classList.remove('visible');
    }

    /* Reorder DOM */
    ranked.forEach(function(p) {
      var b = list.querySelector('[data-plan="'+p+'"]');
      if (b) list.appendChild(b);
    });

    /* FLIP step 2 â€“ animate from old position */
    blocks.forEach(function(b) {
      var delta = firstY[b.dataset.plan] - b.getBoundingClientRect().top;
      if (Math.abs(delta) > 1) {
        b.style.transition = 'none';
        b.style.transform = 'translateY(' + delta + 'px)';
        requestAnimationFrame(function() {
          requestAnimationFrame(function() {
            b.style.transition = 'transform 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            b.style.transform = '';
          });
        });
      }
    });
  }

  /* Ripple */
  function ripple(card, e) {
    var r = card.getBoundingClientRect();
    var sz = Math.max(r.width, r.height);
    var el = document.createElement('span');
    el.className = 'ripple';
    el.style.width = el.style.height = sz + 'px';
    el.style.left = (e.clientX - r.left - sz/2) + 'px';
    el.style.top  = (e.clientY - r.top  - sz/2) + 'px';
    card.appendChild(el);
    setTimeout(function() { if (el.parentNode) el.parentNode.removeChild(el); }, 700);
  }

  /* ===== ç”»é¢ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ ===== */
  function screenFlash(col) {
    var el = document.createElement('div');
    el.className = 'screen-flash';
    el.style.background = col || 'rgba(201,168,108,0.4)';
    document.body.appendChild(el);
    setTimeout(function() { if (el.parentNode) el.parentNode.removeChild(el); }, 600);
  }

  /* ===== ãƒ­ã‚±ãƒƒãƒˆæ‰“ã¡ä¸Šã’ ===== */
  function launchRocket(card) {
    var r = card.getBoundingClientRect();
    var el = document.createElement('div');
    el.className = 'rocket-fly';
    el.textContent = 'ğŸš€';
    el.style.left = (r.left + r.width/2 - 22) + 'px';
    el.style.top  = (r.top  + r.height/2 - 22) + 'px';
    document.body.appendChild(el);
    setTimeout(function() { if (el.parentNode) el.parentNode.removeChild(el); }, 1250);
  }

  /* ===== ã‚«ãƒ©ãƒ•ãƒ«ç´™å¹é›ª ===== */
  var CONF_COLORS = ['#f0b429','#e84040','#4096e8','#40c878','#e840c0','#a67c52','#ffffff','#ffec40'];
  function burstConfetti(card, n) {
    var r = card.getBoundingClientRect();
    var ox = r.left + r.width/2, oy = r.top + r.height/2;
    n = n || 22;
    for (var i = 0; i < n; i++) {
      (function(i) {
        var el = document.createElement('div');
        el.className = 'conf-piece';
        var ang  = (i/n)*360 + Math.random()*22 - 11;
        var dist = 75 + Math.random()*110;
        var cx   = Math.cos(ang*Math.PI/180)*dist;
        var cy   = Math.sin(ang*Math.PI/180)*dist - 35;
        var sz   = 7 + Math.random()*10;
        el.style.cssText =
          'left:'+ox+'px;top:'+oy+'px;' +
          'width:'+sz+'px;height:'+sz+'px;' +
          'background:'+CONF_COLORS[i%CONF_COLORS.length]+';' +
          '--cx:'+cx+'px;--cy:'+cy+'px;' +
          'animation-delay:'+(Math.random()*0.1)+'s;';
        document.body.appendChild(el);
        setTimeout(function(){ if(el.parentNode) el.parentNode.removeChild(el); }, 1200);
      })(i);
    }
  }

  /* ===== å’²ç©ºãƒã‚¹ã‚³ãƒƒãƒˆ ===== */
  var mascotTimer = null;
  var MASCOT_DATA = [
    null,
    { text: 'ãˆã¸ã¸ âœ¨ ã„ã„ã­ï¼',            excited: false, max: false },
    { text: 'ã‚ã‚ï¼ã™ã”ã„ã™ã”ã„ï¼',           excited: true,  max: false },
    { text: 'ã‚‚ã†ã¡ã‚‡ã£ã¨ã ã‚ˆã€œï¼ğŸŒ¸',         excited: true,  max: false },
    { text: 'ã‚„ã£ãŸãƒ¼ï¼ï¼ğŸ€\nãã¾ã£ãŸã­ï¼ï¼', excited: true,  max: true  }
  ];
  function showMascot(cnt) {
    var data = MASCOT_DATA[cnt];
    if (!data) return;
    var mascot = document.getElementById('mascot');
    var textEl = document.getElementById('m-text');

    mascot.classList.remove('show','excited','max-excited');
    void mascot.offsetWidth;

    textEl.innerHTML = data.text.replace('\n','<br>');

    setTimeout(function() {
      mascot.classList.add('show');
      if (data.max) {
        setTimeout(function() { mascot.classList.add('max-excited'); }, 200);
      } else if (data.excited) {
        setTimeout(function() { mascot.classList.add('excited'); }, 280);
      }
    }, 50);

    if (mascotTimer) clearTimeout(mascotTimer);
    if (!data.max) {
      mascotTimer = setTimeout(function() {
        mascot.classList.remove('show','excited','max-excited');
      }, 3400);
    }
  }

  /* ===== ã‚®ãƒ£ãƒ©ãƒªãƒ¼ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ¶å¾¡ï¼ˆã‚¿ãƒƒãƒå¯¾å¿œï¼‰ ===== */
  (function() {
    var track = document.querySelector('.photo-track');
    if (!track) return;
    var galResumeTimer = null;

    track.addEventListener('mouseenter', function() {
      track.style.animationPlayState = 'paused';
    });
    track.addEventListener('mouseleave', function() {
      track.style.animationPlayState = 'running';
    });
    function scheduleResume() {
      if (galResumeTimer) clearTimeout(galResumeTimer);
      galResumeTimer = setTimeout(function() {
        track.style.animationPlayState = 'running';
      }, 2500);
    }
    track.addEventListener('touchstart', function() {
      track.style.animationPlayState = 'paused';
      if (galResumeTimer) clearTimeout(galResumeTimer);
    }, { passive: true });
    track.addEventListener('touchend', scheduleResume, { passive: true });
    track.addEventListener('touchcancel', scheduleResume, { passive: true });
  })();

  /* Bind */
  document.querySelectorAll('.choice-card').forEach(function(card) {
    card.addEventListener('click', function(e) {
      var choicesEl = this.closest('.choices');
      var q = choicesEl.getAttribute('data-q');

      ripple(this, e);
      launchRocket(this);

      choices[q] = this.getAttribute('data-value');
      var cnt = qKeys.filter(function(k) { return choices[k]; }).length;

      burstConfetti(this, cnt === 4 ? 44 : 24);
      screenFlash(cnt === 4 ? 'rgba(255,160,0,0.42)' : 'rgba(201,168,108,0.35)');
      showMascot(cnt);

      choicesEl.querySelectorAll('.choice-card').forEach(function(c) { c.classList.remove('selected'); });
      this.classList.add('selected');
      this.querySelector('input').checked = true;
      choicesEl.classList.add('has-sel');
      var cg = document.getElementById(cgMap[q]);
      if (cg) cg.classList.add('answered');
      updateProgress();
      updateUI();
    });
  });

  updateProgress();
  updateUI();
})();
  </script>
</body>
</html>
